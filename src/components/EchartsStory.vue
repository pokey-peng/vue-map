<template>
  <section id="EchartsContainer">
    <v-container fluid py-0 pr-0>
      <v-row class="scrolly-side">
        <v-col class="scrolly-text pa-0" cols="3">
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-0" class="text-block"></div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-1" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-2" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-3" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-4" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-5" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-6" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-7" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-8" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-9" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-10" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-11" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-12" class="text-block">
              <v-container>
                <h2 class="h5 mb-lg-3">北约源起</h2>
                <p class="body-2">
                  我我我呜呜呜呜呜呜呜呜无无无无无我呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿
                  无无无无无呜呜呜呜呜呜呜呜无无无无无无无无无无无呃呃呃呃呃呃呃呃呃呃呃呃呃呃呃
                </p>
              </v-container>
            </div>
          </v-row>
          <v-row class="wrap justify-center align-start step">
            <div data-step="3-13" class="text-block"></div>
          </v-row>
        </v-col>
        <v-col class="scrolly-sticky pa-0" cols="9">
          <component :is="renderEchart"></component>
        </v-col>
      </v-row>
    </v-container>
  </section>
</template>
<script>
import EchartsBar from "./controller/EchartsBar";
import EchartsGeo from "./controller/EchartsGeo";
import D3Chart from "./controller/D3Chart";
import { mapGetters } from "vuex";
export default {
  name: "EchatsStory",
  components: {
    EchartsBar,
    EchartsGeo,
    D3Chart,
  },
  data: () => {
    return {};
  },
  computed: {
    ...mapGetters("mapView", ["currentPage", "step"]),
    renderEchart() {
      switch (this.step) {
        case "3-0":
          return "D3Chart";
        case "3-1":
          return "D3Chart";
        case "3-2":
          return "D3Chart";
        case "3-3":
          return "EchartsGeo";
        case "3-4":
          return "EchartsGeo";
        case "3-5":
          return "EchartsGeo";
        case "3-6":
          return "EchartsGeo";
        case "3-7":
          return "EchartsGeo";
        case "3-8":
          return "EchartsGeo";
        case "3-9":
          return "EchartsGeo";
        case "3-10":
          return "EchartsGeo";
        case "3-11":
          return "EchartsGeo";
        case "3-12":
          return "EchartsGeo";
        case "3-13":
          return "EchartsGeo";
        default:
          return "D3Chart";
      }
    },
  },
  mounted() {
    this.initScrollama();
  },
  methods: {
    initScrollama() {
      const ScrollamaMapSecond = this.$scrollama();
      ScrollamaMapSecond.setup({
        step: "#EchartsContainer .scrolly-text .step",
        offset: 64 / window.innerHeight,
      })
        .onStepEnter(this.handleStepEnter)
        .onStepExit((response) => {
          //console.log(response);
        });
    },
    handleStepEnter(response) {
      const currentStep = response.element.children[0].dataset["step"];
      this.$store.dispatch("mapView/updateStep", currentStep);
      //console.log("this enter " + currentStep);
    },
  },
};
</script>
<style scoped>
#EchartsContainer {
  position: relative;
  background-color: rgb(186, 200, 207);
}
</style>
